# $Id$

prefix=@prefix@
exec_prefix=@exec_prefix@
bindir=@bindir@
sbindir=@sbindir@
libexecdir=@libexecdir@
datadir=@datadir@
mandir=@mandir@
sysconfdir=@sysconfdir@
srcdir=@srcdir@
top_srcdir=@top_srcdir@
VPATH=@srcdir@
CC=@CC@
DEFS=@DEFS@
LDFLAGS=@LDFLAGS@
CFLAGS=$(DEFS) -I$(srcdir) -I.. @CFLAGS@
CPPFLAGS=@CPPFLAGS@
LIBS=@LIBS@
INSTALL=@INSTALL@
RANLIB=@RANLIB@ 

#CFLAGS+=-DFLOW_RB		# Use red-black tree for flows
CFLAGS+=-DFLOW_SPLAY		# Use splay tree for flows
CFLAGS+=-DEXPIRY_RB		# Use red-black tree for expiry events
#CFLAGS+=-DEXPIRY_SPLAY		# Use splay tree for expiry events

TARGETS=libnfprobe_plugin.a

COMMON=convtime.o strlcat.o

all: $(TARGETS)

libnfprobe_plugin.a: nfprobe_plugin.o netflow1.o netflow5.o netflow9.o $(COMMON)
	ar rc $@ netflow1.o netflow5.o netflow9.o nfprobe_plugin.o $(COMMON)
	$(RANLIB) $@

clean:
	rm -f $(TARGETS) *.o core *.core

realclean: clean
	rm -rf autom4te.cache Makefile config.log config.status

distclean: realclean
	rm -f config.h* configure

strip:
	strip $(TARGETS)

install: all

